# 新浪微博数据采集说明

### 技术笔记
使用redis存储种子队列后，需要对每一个请求做跟踪。

首先，根据经验，我们提供了一个统一的初始化种子入口，即：关键字 + 日期 构成的URL。

在`spider`中，首先将带搜索的日区间切割成每一日，

接着在`middlewares`中检测redis是否存在相应日的种子队列:

如果没有，则把该网址作为初试种子队列

再遍历所有的种子。

在遍历种子时，要精确控制种子的生死，并考虑系统可能的异常，因此要采取鲁棒的方式去提取种子。

一种方案如下：

在种子队列/集合中，随机/顺序get一个种子，并访问，

如果没有检测到页面数，则有一部分原因可能是网络原因，但无论是否是网络原因，将直接从队列中移除该页。

如果有检测到页面数，且在50页内，则采集每一页的信息，并带上页面分号以指示不再分页。

如果有检测到页面数，且超过50页，则首先按小时切分，再按地区切分，直到最后不能切分，启动分页采集，并标记。
